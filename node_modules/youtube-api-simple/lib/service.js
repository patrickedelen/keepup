module.exports = service;

var url = require('url');
var request = require('request');
var q = require('q');

/**
 * Service class for YouTube API
 * @param  {String} name Name of the YouTube service
 * @param  {String} key  API Key for YouTube API
 * @param  {String} uri  The URI root target for API calls 
 */
function service(name, key, uri){
	this.name = name;
	this.key = key;
	this.uri = uri;
}

/**
 * List method for YouTube services
 * @param  {Object} options Options to pass to the method
 *                          Example: {part: 'contentDetails'}
 * @return {Promise}        The Promise of the API call
 */
service.prototype.list = function(options){
	var uri = url.resolve(this.uri, this.name);

	options = options || {};
	options.key = this.key;

	var opt = {
		uri: uri,
		qs: options
	};

	var deferred = q.defer();

	request(opt, function(error, response, body){
		deferred.resolve(body);
	});

	return deferred.promise;
};